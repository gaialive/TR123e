<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR123e - EMCT Computing Final Project: MoogFilterEnvelope Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TR123e - EMCT Computing Final Project<span id="projectnumber">&#160;Version 1.0</span>
   </div>
   <div id="projectbrief">Research Project Translation from gen~ to embedded Moog synth</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_moog_filter_envelope.html','','class_moog_filter_envelope-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MoogFilterEnvelope Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Specialized filter envelope generator with velocity sensitivity and depth control.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_moog_filter_envelope_8h_source.html">MoogFilterEnvelope.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acccc003dd35c578f83a99b5fcbe76322" id="r_acccc003dd35c578f83a99b5fcbe76322"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acccc003dd35c578f83a99b5fcbe76322">MoogFilterEnvelope</a> (float sampleRate)</td></tr>
<tr class="memdesc:acccc003dd35c578f83a99b5fcbe76322"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct filter envelope with audio system sample rate.  <br /></td></tr>
<tr class="memitem:a8c39f32914bc7c8f9adc1ffa9dfa2561" id="r_a8c39f32914bc7c8f9adc1ffa9dfa2561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c39f32914bc7c8f9adc1ffa9dfa2561">setADSR</a> (float attackSec, float decaySec, float sustainLvl, float releaseSec)</td></tr>
<tr class="memdesc:a8c39f32914bc7c8f9adc1ffa9dfa2561"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure ADSR envelope timing parameters.  <br /></td></tr>
<tr class="memitem:a03addf6c7e17981e41fe22d18d7193d4" id="r_a03addf6c7e17981e41fe22d18d7193d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03addf6c7e17981e41fe22d18d7193d4">setEnvDepth</a> (float depth)</td></tr>
<tr class="memdesc:a03addf6c7e17981e41fe22d18d7193d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set envelope modulation depth for filter frequency control.  <br /></td></tr>
<tr class="memitem:a9e534c7b4b4683c268e3ba5412796017" id="r_a9e534c7b4b4683c268e3ba5412796017"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e534c7b4b4683c268e3ba5412796017">gate</a> (int gateState, float velocity)</td></tr>
<tr class="memdesc:a9e534c7b4b4683c268e3ba5412796017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger envelope gate with optional velocity sensitivity.  <br /></td></tr>
<tr class="memitem:a6579ec40dd6292f9aa084fb1b555f758" id="r_a6579ec40dd6292f9aa084fb1b555f758"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6579ec40dd6292f9aa084fb1b555f758">process</a> (float cutoffBase, float keyFollowValue)</td></tr>
<tr class="memdesc:a6579ec40dd6292f9aa084fb1b555f758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process envelope and generate filter cutoff frequency.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a52e98c5b6b498468ffc0192ebfc60d6a" id="r_a52e98c5b6b498468ffc0192ebfc60d6a"><td class="memItemLeft" align="right" valign="top">ADSR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52e98c5b6b498468ffc0192ebfc60d6a">envelope</a></td></tr>
<tr class="memdesc:a52e98c5b6b498468ffc0192ebfc60d6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal ADSR envelope generator instance.  <br /></td></tr>
<tr class="memitem:ac67d3b067df02b4af999ec8849d75c22" id="r_ac67d3b067df02b4af999ec8849d75c22"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac67d3b067df02b4af999ec8849d75c22">envDepth</a></td></tr>
<tr class="memdesc:ac67d3b067df02b4af999ec8849d75c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envelope modulation depth scaling factor.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Specialized filter envelope generator with velocity sensitivity and depth control. </p>
<p>The <a class="el" href="class_moog_filter_envelope.html" title="Specialized filter envelope generator with velocity sensitivity and depth control.">MoogFilterEnvelope</a> class provides a complete filter modulation system combining ADSR envelope generation with filter-specific functionality. It implements the classic analog synthesizer paradigm of independent filter envelope control with configurable depth, velocity sensitivity, and keyboard tracking integration.</p>
<p>@design_patterns</p><ul>
<li><b>Adapter Pattern</b>: Adapts generic ADSR for filter-specific applications</li>
<li><b>Facade Pattern</b>: Simplifies complex envelope+scaling operations</li>
<li><b>Composition</b>: Contains ADSR instance rather than inheriting</li>
</ul>
<p>@musical_characteristics</p><ul>
<li><b>Classic Analog Response</b>: Emulates vintage Moog synthesizer filter behavior</li>
<li><b>Velocity Sensitivity</b>: Dynamic response to playing intensity</li>
<li><b>Configurable Depth</b>: Artistic control over modulation intensity</li>
<li><b>Seamless Integration</b>: Compatible with keyboard tracking and base frequency</li>
</ul>
<p>@typical_applications</p><ul>
<li>Lead synthesizer voices with expressive filter sweeps</li>
<li>Bass sounds with percussive filter attacks</li>
<li>Pad sounds with slow filter evolution</li>
<li>Rhythmic sequences with synchronized filter movement</li>
<li>Educational software demonstrating classic synthesis techniques</li>
</ul>
<p>@usage_example </p><div class="fragment"><div class="line"><a class="code hl_function" href="#acccc003dd35c578f83a99b5fcbe76322">MoogFilterEnvelope</a> <a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>(44100.0f);</div>
<div class="line"><a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>.setADSR(0.01f, 0.1f, 0.7f, 0.3f);  <span class="comment">// Fast attack, moderate decay/release</span></div>
<div class="line"><a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>.setEnvDepth(48.0f);                 <span class="comment">// 4 octaves modulation range</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// In note-on processing:</span></div>
<div class="line"><a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>.gate(1, velocity / 127.0f);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// In audio processing loop:</span></div>
<div class="line"><span class="keywordtype">float</span> cutoff = <a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>.process(baseCutoff, keyTrackingValue);</div>
<div class="line">filter.setCutoff(cutoff);</div>
<div class="ttc" id="aclass_moog_filter_envelope_html_acccc003dd35c578f83a99b5fcbe76322"><div class="ttname"><a href="#acccc003dd35c578f83a99b5fcbe76322">MoogFilterEnvelope::MoogFilterEnvelope</a></div><div class="ttdeci">MoogFilterEnvelope(float sampleRate)</div><div class="ttdoc">Construct filter envelope with audio system sample rate.</div><div class="ttdef"><b>Definition</b> MoogFilterEnvelope.cpp:23</div></div>
<div class="ttc" id="arender__with___m_o_o_g_f_i_l_t_e_r_8cpp_html_a93536452e531a2a13e8c270903c09375"><div class="ttname"><a href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a></div><div class="ttdeci">MoogFilterEnvelope filterEnv(44100.0f)</div></div>
</div><!-- fragment --> </div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acccc003dd35c578f83a99b5fcbe76322" name="acccc003dd35c578f83a99b5fcbe76322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccc003dd35c578f83a99b5fcbe76322">&#9670;&#160;</a></span>MoogFilterEnvelope()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MoogFilterEnvelope::MoogFilterEnvelope </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>sampleRate</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct filter envelope with audio system sample rate. </p>
<p>Initialize filter envelope with musically appropriate defaults.</p>
<p>Initializes the internal ADSR envelope generator with musically appropriate default parameters optimized for filter frequency modulation. The default settings provide a classic analog synthesizer response suitable for most musical applications without requiring immediate parameter adjustment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sampleRate</td><td>Audio processing sample rate in Hz Used for accurate envelope timing calculations Typical values: 44100, 48000, 96000 Hz</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) - Constant time initialization @memory ~40 bytes object size (ADSR envelope plus parameters) @thread_safety Safe for concurrent construction</p>
<p>@default_parameters</p><ul>
<li>Attack: 441 samples (≈10ms at 44.1kHz) - Quick response, prevents clicks</li>
<li>Decay: 4410 samples (≈100ms at 44.1kHz) - Moderate decay for musical character</li>
<li>Sustain: 0.75 (75% level) - High sustain for consistent filter opening</li>
<li>Release: 8820 samples (≈200ms at 44.1kHz) - Smooth release, prevents artifacts</li>
<li>Envelope Depth: 1.0 (unity gain) - Conservative default modulation depth</li>
</ul>
<p>@musical_rationale Default parameters provide a balanced filter response suitable for lead voices, bass sounds, and general-purpose synthesis without excessive filter movement that could cause timbral instability or frequency content aliasing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sampleRate</td><td>Audio system sample rate for timing calculations</td></tr>
  </table>
  </dd>
</dl>
<p>Constructs envelope with conservative default parameters suitable for general musical applications without requiring immediate adjustment. The defaults provide classic analog synthesizer character while maintaining timbral stability across diverse musical contexts. </p>
<p>Initialize envelope to idle state Ensures clean startup without residual envelope activity</p>
<p>Configure default envelope timing (sample-based) Values chosen for musical utility and analog synthesizer character</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a9e534c7b4b4683c268e3ba5412796017" name="a9e534c7b4b4683c268e3ba5412796017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e534c7b4b4683c268e3ba5412796017">&#9670;&#160;</a></span>gate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoogFilterEnvelope::gate </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>gateState</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>velocity</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trigger envelope gate with optional velocity sensitivity. </p>
<p>Trigger envelope gate state change.</p>
<p>Controls envelope gate state for note-on and note-off events. The gate mechanism provides musical control over envelope triggering and release, matching the behavior of traditional analog synthesizer gate inputs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gateState</td><td>Gate control signal 1 (or non-zero): Trigger envelope attack phase (note-on) 0: Trigger envelope release phase (note-off)</td></tr>
    <tr><td class="paramname">velocity</td><td>MIDI velocity value for future velocity sensitivity Currently unused but provided for interface consistency Range: [0.0-1.0] normalized velocity Future implementations may use for envelope scaling</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) - Direct delegation to ADSR envelope @determinism Deterministic gate state transition @realtime_safety Real-time safe (no blocking operations)</p>
<p>@behavioral_notes</p><ul>
<li>Gate-on (1): Immediately triggers attack phase regardless of current envelope state</li>
<li>Gate-off (0): Triggers release phase from current envelope level</li>
<li>Retriggering: Multiple gate-on events restart attack from beginning</li>
<li>Velocity parameter: Reserved for future velocity-sensitive implementations</li>
</ul>
<p>@envelope_state_transitions </p><div class="fragment"><div class="line"><a class="code hl_function" href="#a9e534c7b4b4683c268e3ba5412796017">gate</a>(1) → Attack → Decay → Sustain (held while <a class="code hl_function" href="#a9e534c7b4b4683c268e3ba5412796017">gate</a>=1)</div>
<div class="line"><a class="code hl_function" href="#a9e534c7b4b4683c268e3ba5412796017">gate</a>(0) → Release → Idle (<a class="code hl_variable" href="#a52e98c5b6b498468ffc0192ebfc60d6a">envelope</a> complete)</div>
<div class="ttc" id="aclass_moog_filter_envelope_html_a52e98c5b6b498468ffc0192ebfc60d6a"><div class="ttname"><a href="#a52e98c5b6b498468ffc0192ebfc60d6a">MoogFilterEnvelope::envelope</a></div><div class="ttdeci">ADSR envelope</div><div class="ttdoc">Internal ADSR envelope generator instance.</div><div class="ttdef"><b>Definition</b> MoogFilterEnvelope.h:330</div></div>
<div class="ttc" id="aclass_moog_filter_envelope_html_a9e534c7b4b4683c268e3ba5412796017"><div class="ttname"><a href="#a9e534c7b4b4683c268e3ba5412796017">MoogFilterEnvelope::gate</a></div><div class="ttdeci">void gate(int gateState, float velocity)</div><div class="ttdoc">Trigger envelope gate with optional velocity sensitivity.</div><div class="ttdef"><b>Definition</b> MoogFilterEnvelope.cpp:89</div></div>
</div><!-- fragment --><p>@musical_applications Proper gate timing is crucial for musical expression:</p><ul>
<li>Legato playing: Overlapping gates create smooth envelope transitions</li>
<li>Staccato playing: Short gate pulses create percussive envelope shapes</li>
<li>Sustained playing: Long gates maintain sustain phase for harmonic stability</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gateState</td><td>Gate control (1=on, 0=off) </td></tr>
    <tr><td class="paramname">velocity</td><td>Velocity parameter (currently unused)</td></tr>
  </table>
  </dd>
</dl>
<p>Direct delegation to underlying ADSR envelope for gate control. Velocity parameter provided for interface consistency but not currently implemented for velocity-sensitive envelope behavior. </p>

</div>
</div>
<a id="a6579ec40dd6292f9aa084fb1b555f758" name="a6579ec40dd6292f9aa084fb1b555f758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6579ec40dd6292f9aa084fb1b555f758">&#9670;&#160;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MoogFilterEnvelope::process </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>cutoffBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>keyFollowValue</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process envelope and generate filter cutoff frequency. </p>
<p>Generate filter cutoff frequency with envelope modulation.</p>
<p>Core processing method that generates the final filter cutoff frequency by combining base frequency, keyboard tracking, and envelope modulation. This method should be called once per audio sample to maintain proper envelope timing and smooth filter frequency control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cutoffBase</td><td>Base filter cutoff frequency in Hz Fundamental filter setting before modulation Typical range: [20.0-20000.0] Hz</td></tr>
    <tr><td class="paramname">keyFollowValue</td><td>Keyboard tracking contribution in Hz Additional frequency offset based on note number Provides consistent timbre across keyboard range</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Final filter cutoff frequency in Hz Combined result of base frequency, key tracking, and envelope modulation Range: [0.0-∞) Hz, practical limit depends on audio system Nyquist frequency</dd></dl>
<p>@complexity O(1) - Single envelope processing call plus arithmetic @precision IEEE 754 single precision floating-point @realtime_safety Real-time safe (deterministic execution time)</p>
<p>@algorithm_implementation</p><ol type="1">
<li>Process underlying ADSR envelope to get current envelope value [0.0-1.0]</li>
<li>Scale envelope output by configured depth parameter</li>
<li>Add base cutoff frequency and keyboard tracking contribution</li>
<li>Return combined frequency for immediate filter control</li>
</ol>
<p>@mathematical_formula output_frequency = cutoffBase + keyFollowValue + (envelope_output × envDepth)</p>
<p>@frequency_bounds_checking The implementation does not perform bounds checking on output frequency. Callers should ensure reasonable input parameters to prevent:</p><ul>
<li>Negative frequencies (causes filter instability)</li>
<li>Frequencies above Nyquist limit (causes aliasing)</li>
<li>Excessively high frequencies (may cause numerical overflow)</li>
</ul>
<p>@call_pattern Must be called exactly once per audio sample for proper timing: </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> sample = 0; sample &lt; <a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a8556d19b129aa550f5b2819ed0320e83">bufferSize</a>; ++sample) {</div>
<div class="line">    <span class="keywordtype">float</span> cutoff = <a class="code hl_variable" href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a93536452e531a2a13e8c270903c09375">filterEnv</a>.process(baseCutoff, keyTracking);</div>
<div class="line">    filter.setCutoff(cutoff);</div>
<div class="line">    <span class="comment">// Continue with audio processing...</span></div>
<div class="line">}</div>
<div class="ttc" id="arender__with___m_o_o_g_f_i_l_t_e_r_8cpp_html_a8556d19b129aa550f5b2819ed0320e83"><div class="ttname"><a href="render__with___m_o_o_g_f_i_l_t_e_r_8cpp.html#a8556d19b129aa550f5b2819ed0320e83">bufferSize</a></div><div class="ttdeci">int bufferSize</div><div class="ttdef"><b>Definition</b> render_with_MOOGFILTER.cpp:116</div></div>
</div><!-- fragment --><p>@debug_instrumentation Contains commented rt_printf() for real-time debugging of envelope depth output. Uncomment for development but remove in production due to potential timing impact.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cutoffBase</td><td>Base filter frequency </td></tr>
    <tr><td class="paramname">keyFollowValue</td><td>Keyboard tracking contribution </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Combined filter cutoff frequency</dd></dl>
<p>@algorithm_steps</p><ol type="1">
<li>Process ADSR envelope to get current modulation value [0.0-1.0]</li>
<li>Scale by envelope depth for configurable modulation intensity</li>
<li>Add to base frequency and keyboard tracking for final result</li>
</ol>
<p>@performance_analysis</p><ul>
<li>Single envelope.process() call: O(1) complexity</li>
<li>Two floating-point additions: ~1-2 CPU cycles</li>
<li>One floating-point multiplication: ~1 CPU cycle</li>
<li>Total: ~3-5 CPU cycles per sample (excluding envelope processing) </li>
</ul>
<p>Process underlying envelope generator Returns normalized envelope value [0.0-1.0]</p>
<p>Debug output (commented for production performance) Uncomment for envelope depth analysis during development</p>
<p>Combine all frequency components using additive synthesis Linear frequency addition provides predictable filter behavior</p>

</div>
</div>
<a id="a8c39f32914bc7c8f9adc1ffa9dfa2561" name="a8c39f32914bc7c8f9adc1ffa9dfa2561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c39f32914bc7c8f9adc1ffa9dfa2561">&#9670;&#160;</a></span>setADSR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoogFilterEnvelope::setADSR </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>attackSec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>decaySec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>sustainLvl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>releaseSec</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure ADSR envelope timing parameters. </p>
<p>Configure ADSR timing parameters with seconds-to-samples conversion.</p>
<p>Sets the four-stage envelope timing with sample-accurate precision. All timing parameters are specified in seconds for intuitive musical control, then converted to sample counts for precise real-time processing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attackSec</td><td>Attack time in seconds [0.001-10.0 typical] Time to reach peak envelope level from gate-on Shorter times: punchy, percussive character Longer times: smooth, gradual filter opening</td></tr>
    <tr><td class="paramname">decaySec</td><td>Decay time in seconds [0.01-10.0 typical] Time to fall from peak to sustain level Controls initial filter sweep character and musical punch</td></tr>
    <tr><td class="paramname">sustainLvl</td><td>Sustain level [0.0-1.0] Envelope level maintained during note hold phase Higher values: brighter sustained timbre Lower values: darker sustained timbre</td></tr>
    <tr><td class="paramname">releaseSec</td><td>Release time in seconds [0.01-30.0 typical] Time to fall from sustain to zero after gate-off Controls filter closure speed and note tail character</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) - Direct parameter assignment @precision Sample-accurate timing (limited by sample rate quantization) @realtime_safety Real-time safe (no allocation or blocking)</p>
<dl class="section note"><dt>Note</dt><dd>The implementation currently uses a hardcoded 44.1kHz conversion factor which may cause timing inaccuracies at other sample rates. This appears to be a bug that should use the sampleRate parameter passed to constructor.</dd></dl>
<p>@musical_guidelines</p><ul>
<li>Lead sounds: Fast attack (1-10ms), medium decay (50-200ms), high sustain (70-90%)</li>
<li>Bass sounds: Very fast attack (1-5ms), fast decay (20-100ms), medium sustain (50-70%)</li>
<li>Pad sounds: Slow attack (100-1000ms), slow decay (200-2000ms), high sustain (80-95%)</li>
<li>Percussive sounds: Fast attack (1-5ms), fast decay (10-50ms), low sustain (0-30%)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attackSec</td><td>Attack time in seconds </td></tr>
    <tr><td class="paramname">decaySec</td><td>Decay time in seconds <br  />
 </td></tr>
    <tr><td class="paramname">sustainLvl</td><td>Sustain level [0.0-1.0] </td></tr>
    <tr><td class="paramname">releaseSec</td><td>Release time in seconds</td></tr>
  </table>
  </dd>
</dl>
<p>@bug_notice The implementation uses hardcoded 44100.0f sample rate conversion instead of the sampleRate parameter from constructor. This causes timing inaccuracies at other sample rates and should be corrected to use the stored sample rate value for accurate timing across all audio configurations.</p>
<p>@correct_implementation_should_be </p><div class="fragment"><div class="line"><a class="code hl_variable" href="#a52e98c5b6b498468ffc0192ebfc60d6a">envelope</a>.setAttackRate(attackSec * sampleRate);</div>
<div class="line"><a class="code hl_variable" href="#a52e98c5b6b498468ffc0192ebfc60d6a">envelope</a>.setDecayRate(decaySec * sampleRate);</div>
<div class="line"><a class="code hl_variable" href="#a52e98c5b6b498468ffc0192ebfc60d6a">envelope</a>.setReleaseRate(releaseSec * sampleRate);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a03addf6c7e17981e41fe22d18d7193d4" name="a03addf6c7e17981e41fe22d18d7193d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03addf6c7e17981e41fe22d18d7193d4">&#9670;&#160;</a></span>setEnvDepth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoogFilterEnvelope::setEnvDepth </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>depth</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set envelope modulation depth for filter frequency control. </p>
<p>Update envelope modulation depth parameter.</p>
<p>Controls the intensity of envelope modulation applied to filter cutoff frequency. Higher values create more dramatic filter sweeps, while lower values provide subtle timbral animation. The depth parameter scales the envelope output before adding to the base filter frequency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth</td><td>Modulation depth in implementation-defined units Typical range: [0.0-96.0] representing semitones 0.0: No envelope modulation (static filter) 12.0: One octave maximum modulation range 48.0: Four octaves maximum modulation range 96.0: Eight octaves maximum modulation range</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) - Simple parameter assignment @range [0.0-∞) theoretically, [0.0-96.0] musically practical @precision Full floating-point precision maintained @realtime_safety Real-time safe (immediate parameter update)</p>
<p>@musical_considerations</p><ul>
<li>Subtle depth (1-12 semitones): Natural timbral animation without obvious sweeps</li>
<li>Moderate depth (12-24 semitones): Classic analog synthesizer filter character</li>
<li>High depth (24-48 semitones): Dramatic sweeps for lead lines and special effects</li>
<li>Extreme depth (48+ semitones): Sound design applications, may cause aliasing</li>
</ul>
<p>@frequency_mapping The depth value is added linearly to the filter cutoff frequency: final_cutoff = base_cutoff + keytrack + (envelope_output × depth)</p>
<p>This linear mapping provides predictable behavior but may not match the logarithmic frequency perception of human hearing. Future implementations might benefit from exponential frequency mapping for more natural sweeps.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth</td><td>New modulation depth value</td></tr>
  </table>
  </dd>
</dl>
<p>Simple parameter update providing immediate effect on subsequent <a class="el" href="#a6579ec40dd6292f9aa084fb1b555f758" title="Process envelope and generate filter cutoff frequency.">process()</a> calls. No validation performed for maximum performance. </p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="ac67d3b067df02b4af999ec8849d75c22" name="ac67d3b067df02b4af999ec8849d75c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac67d3b067df02b4af999ec8849d75c22">&#9670;&#160;</a></span>envDepth</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float MoogFilterEnvelope::envDepth</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Envelope modulation depth scaling factor. </p>
<p>Controls the intensity of envelope modulation applied to filter frequency. Acts as a multiplier for the envelope output before addition to base frequency, providing artistic control over filter sweep intensity while maintaining envelope timing characteristics.</p>
<p>@units Implementation-defined (typically semitones or Hz) @range [0.0-∞) theoretically, [0.0-96.0] musically practical @default 1.0 (unity gain, conservative modulation depth) </p>

</div>
</div>
<a id="a52e98c5b6b498468ffc0192ebfc60d6a" name="a52e98c5b6b498468ffc0192ebfc60d6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e98c5b6b498468ffc0192ebfc60d6a">&#9670;&#160;</a></span>envelope</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ADSR MoogFilterEnvelope::envelope</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal ADSR envelope generator instance. </p>
<p>Core envelope processing engine providing four-stage ADSR envelope generation with configurable timing, curvature, and gate control. All envelope-specific functionality is delegated to this component for modularity and code reuse.</p>
<p>@composition_rationale Uses composition rather than inheritance to maintain clear separation between generic envelope generation and filter-specific functionality. This design allows independent evolution of envelope algorithms while preserving the filter-specific interface and behavior. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_moog_filter_envelope_8h_source.html">MoogFilterEnvelope.h</a></li>
<li><a class="el" href="_moog_filter_envelope_8cpp.html">MoogFilterEnvelope.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_moog_filter_envelope.html">MoogFilterEnvelope</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
