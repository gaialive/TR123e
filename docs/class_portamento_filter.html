<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR123e - EMCT Computing Final Project: PortamentoFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TR123e - EMCT Computing Final Project<span id="projectnumber">&#160;Version 1.0</span>
   </div>
   <div id="projectbrief">Research Project Translation from gen~ to embedded Moog synth</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_portamento_filter.html','','class_portamento_filter-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">PortamentoFilter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Musical technique analyzer for intelligent portamento triggering.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_portamento_filter_8h_source.html">PortamentoFilter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adca2e121e1e4673284cc5625a87416e6" id="r_adca2e121e1e4673284cc5625a87416e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adca2e121e1e4673284cc5625a87416e6">PortamentoFilter</a> ()</td></tr>
<tr class="memdesc:adca2e121e1e4673284cc5625a87416e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize portamento filter with default state.  <br /></td></tr>
<tr class="memitem:a5a989702e6f45013b912f0b813bb85cf" id="r_a5a989702e6f45013b912f0b813bb85cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a989702e6f45013b912f0b813bb85cf">checkPortamento</a> (int newNote, bool noteOn, float currentTimeMs)</td></tr>
<tr class="memdesc:a5a989702e6f45013b912f0b813bb85cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze note event and determine portamento requirement.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa144080215041d2641acfc5267ff96ef" id="r_aa144080215041d2641acfc5267ff96ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa144080215041d2641acfc5267ff96ef">previousNote</a></td></tr>
<tr class="memdesc:aa144080215041d2641acfc5267ff96ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Previous MIDI note number for comparison analysis.  <br /></td></tr>
<tr class="memitem:a0e4f48ceb0f6b3ebdbaffca3399746d0" id="r_a0e4f48ceb0f6b3ebdbaffca3399746d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e4f48ceb0f6b3ebdbaffca3399746d0">previousNoteActive</a></td></tr>
<tr class="memdesc:a0e4f48ceb0f6b3ebdbaffca3399746d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Previous note activity state indicator.  <br /></td></tr>
<tr class="memitem:acc164858cc074396b4727c80b3f4f1c7" id="r_acc164858cc074396b4727c80b3f4f1c7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc164858cc074396b4727c80b3f4f1c7">previousNoteOffTime</a></td></tr>
<tr class="memdesc:acc164858cc074396b4727c80b3f4f1c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp of most recent note-off event.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Musical technique analyzer for intelligent portamento triggering. </p>
<p>The <a class="el" href="class_portamento_filter.html" title="Musical technique analyzer for intelligent portamento triggering.">PortamentoFilter</a> class implements real-time analysis of MIDI note patterns to determine when portamento should be applied based on legato playing technique detection. This provides musically intelligent behavior that responds appropriately to different performance styles without requiring explicit control messages.</p>
<p>@design_philosophy The implementation prioritizes musical accuracy over technical complexity, using simple but effective heuristics that match performer expectations from acoustic instruments. The algorithm errs toward conservative portamento triggering to avoid unwanted pitch slides during fast passages.</p>
<p>@state_machine_design </p><div class="fragment"><div class="line">[IDLE] --note_on--&gt; [NOTE_ACTIVE]</div>
<div class="line">  |                       |</div>
<div class="line">  |                   note_on(different) --&gt; [PORTAMENTO_TRIGGER]</div>
<div class="line">  |                       |</div>
<div class="line">  +--note_off&lt;------------+</div>
</div><!-- fragment --><p>@musical_applications</p><ul>
<li>Lead synthesizer voices requiring expressive pitch slides</li>
<li>Bass lines with smooth frequency transitions</li>
<li>Vocal synthesis emulation with natural portamento</li>
<li>Educational software teaching legato technique</li>
</ul>
<p>@usage_example </p><div class="fragment"><div class="line"><a class="code hl_function" href="#adca2e121e1e4673284cc5625a87416e6">PortamentoFilter</a> filter;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// In MIDI processing loop:</span></div>
<div class="line"><span class="keywordtype">bool</span> usePortamento = filter.<a class="code hl_function" href="#a5a989702e6f45013b912f0b813bb85cf">checkPortamento</a>(noteNumber, isNoteOn, timestamp);</div>
<div class="line"><span class="keywordflow">if</span> (usePortamento) {</div>
<div class="line">    player.noteOn(noteNumber, <span class="keyword">true</span>);  <span class="comment">// Enable smooth transition</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    player.noteOn(noteNumber, <span class="keyword">false</span>); <span class="comment">// Immediate frequency jump</span></div>
<div class="line">}</div>
<div class="ttc" id="aclass_portamento_filter_html_a5a989702e6f45013b912f0b813bb85cf"><div class="ttname"><a href="#a5a989702e6f45013b912f0b813bb85cf">PortamentoFilter::checkPortamento</a></div><div class="ttdeci">bool checkPortamento(int newNote, bool noteOn, float currentTimeMs)</div><div class="ttdoc">Analyze note event and determine portamento requirement.</div><div class="ttdef"><b>Definition</b> PortamentoFilter.cpp:50</div></div>
<div class="ttc" id="aclass_portamento_filter_html_adca2e121e1e4673284cc5625a87416e6"><div class="ttname"><a href="#adca2e121e1e4673284cc5625a87416e6">PortamentoFilter::PortamentoFilter</a></div><div class="ttdeci">PortamentoFilter()</div><div class="ttdoc">Initialize portamento filter with default state.</div><div class="ttdef"><b>Definition</b> PortamentoFilter.cpp:25</div></div>
</div><!-- fragment --> </div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adca2e121e1e4673284cc5625a87416e6" name="adca2e121e1e4673284cc5625a87416e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adca2e121e1e4673284cc5625a87416e6">&#9670;&#160;</a></span>PortamentoFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PortamentoFilter::PortamentoFilter </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize portamento filter with default state. </p>
<p>Initialize portamento filter to safe default state.</p>
<p>Constructs filter in idle state with no previous note information. All state variables are initialized to safe default values that prevent spurious portamento triggering on first note.</p>
<p>@complexity O(1) - Constant time initialization @memory 12 bytes total object size (platform dependent) @thread_safety Safe for concurrent construction</p>
<p>Sets all state variables to values that ensure proper behavior on first note event. The initialization prevents spurious portamento triggering when no valid previous note context exists.</p>
<p>@implementation_details</p><ul>
<li>previousNote = -1: Indicates no valid previous note (outside MIDI range)</li>
<li>previousNoteActive = false: Ensures first note won't trigger portamento</li>
<li>previousNoteOffTime = 0.0f: Safe default timestamp value </li>
</ul>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a5a989702e6f45013b912f0b813bb85cf" name="a5a989702e6f45013b912f0b813bb85cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a989702e6f45013b912f0b813bb85cf">&#9670;&#160;</a></span>checkPortamento()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PortamentoFilter::checkPortamento </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>newNote</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>noteOn</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>currentTimeMs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analyze note event and determine portamento requirement. </p>
<p>Analyze note event and determine portamento application.</p>
<p>Processes incoming MIDI note events to determine whether portamento should be applied based on legato playing technique detection. The algorithm analyzes note overlap patterns and pitch relationships to provide musically intelligent portamento behavior.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newNote</td><td>MIDI note number [0-127] for current note event </td></tr>
    <tr><td class="paramname">noteOn</td><td>Boolean indicating note-on (true) or note-off (false) </td></tr>
    <tr><td class="paramname">currentTimeMs</td><td>Current timestamp in milliseconds for temporal analysis</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if portamento should be applied for this note transition false if note should start immediately without pitch slide</dd></dl>
<p>@complexity O(1) - Constant time analysis @determinism Bounded execution time regardless of input values @realtime_safety Real-time safe (no blocking operations)</p>
<p>@algorithm_logic For note-on events:</p><ol type="1">
<li>Check if previous note is still active (overlap condition)</li>
<li>Verify new note differs from previous (pitch change requirement)</li>
<li>Update internal state with new note information</li>
<li>Return portamento decision based on overlap AND pitch change</li>
</ol>
<p>For note-off events:</p><ol type="1">
<li>Mark previous note as inactive</li>
<li>Record note-off timestamp for future temporal analysis</li>
<li>Return false (portamento not applicable to note-off)</li>
</ol>
<p>@musical_considerations</p><ul>
<li>Portamento only triggers for overlapping notes with different pitches</li>
<li>Same-note retriggering does not activate portamento (trill protection)</li>
<li>Note-off events update state but never trigger portamento</li>
<li>First note after silence never triggers portamento (no source pitch)</li>
</ul>
<p>@edge_cases</p><ul>
<li>Rapid note repetition: Prevented by pitch difference requirement</li>
<li>Simultaneous note-on/note-off: Handled by state precedence rules</li>
<li>Invalid MIDI note numbers: Processed without validation for performance</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newNote</td><td>MIDI note number for analysis </td></tr>
    <tr><td class="paramname">noteOn</td><td>Note event type (true=on, false=off) </td></tr>
    <tr><td class="paramname">currentTimeMs</td><td>Current system timestamp </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Portamento decision for this note transition</dd></dl>
<p>@algorithm_implementation The algorithm implements a simple but musically effective state machine that tracks note overlap conditions and pitch relationships to determine when smooth pitch transitions are appropriate.</p>
<p>@performance_analysis</p><ul>
<li>No loops or recursion: O(1) guaranteed execution time</li>
<li>Minimal branching: CPU branch predictor friendly</li>
<li>No function calls: Inline operations for maximum efficiency</li>
<li>Cache efficient: All data in single object instance </li>
</ul>
<p>Local variable for portamento decision Initialized to false (conservative default)</p>
<p>Process note-on events for legato analysis</p>
<p>Check for legato condition: overlapping notes with different pitches</p>
<p>Conditions for portamento triggering:</p><ol type="1">
<li>previousNoteActive: Previous note still sustaining (overlap)</li>
<li>previousNote != newNote: Different pitch (slide required)</li>
</ol>
<p>This logic ensures portamento only occurs for musically appropriate transitions where the performer intends smooth pitch connection.</p>
<p>Notes overlap and are different: trigger portamento This represents classic legato playing technique where the performer connects notes smoothly without gaps.</p>
<p>Either no overlap or same note: no portamento Cases covered:</p><ul>
<li>First note (no previous active note)</li>
<li>Staccato playing (gap between notes)</li>
<li>Note retriggering (same pitch, no slide needed)</li>
</ul>
<p>Update state for next iteration Mark new note as active and store its pitch for future comparison</p>
<p>Process note-off events: update state without triggering portamento</p>
<p>Note-off events never trigger portamento but update internal state to track note activity and timing for subsequent analysis.</p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="aa144080215041d2641acfc5267ff96ef" name="aa144080215041d2641acfc5267ff96ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa144080215041d2641acfc5267ff96ef">&#9670;&#160;</a></span>previousNote</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int PortamentoFilter::previousNote</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Previous MIDI note number for comparison analysis. </p>
<p>Stores the MIDI note number of the most recently active note for pitch comparison with incoming notes. Used to determine if portamento should be applied based on pitch interval requirements.</p>
<p>@range [0-127] for valid MIDI notes, -1 for uninitialized state @initialization -1 (no previous note available) @update_policy Updated on every note-on event </p>

</div>
</div>
<a id="a0e4f48ceb0f6b3ebdbaffca3399746d0" name="a0e4f48ceb0f6b3ebdbaffca3399746d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e4f48ceb0f6b3ebdbaffca3399746d0">&#9670;&#160;</a></span>previousNoteActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool PortamentoFilter::previousNoteActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Previous note activity state indicator. </p>
<p>Boolean flag indicating whether the previous note is still conceptually "active" from a musical perspective. This determines overlap conditions for legato detection and portamento triggering logic.</p>
<p>@states</p><ul>
<li>true: Previous note still active (sustaining or in release phase)</li>
<li>false: No active previous note (idle or after note-off)</li>
</ul>
<p>@musical_significance Represents the performer's intent regarding note connection. Active state indicates potential for legato playing and portamento application. </p>

</div>
</div>
<a id="acc164858cc074396b4727c80b3f4f1c7" name="acc164858cc074396b4727c80b3f4f1c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc164858cc074396b4727c80b3f4f1c7">&#9670;&#160;</a></span>previousNoteOffTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float PortamentoFilter::previousNoteOffTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timestamp of most recent note-off event. </p>
<p>Records the precise timing of the last note-off event for potential future use in temporal analysis algorithms. Currently used for state tracking but provides foundation for advanced timing-based heuristics.</p>
<p>@units Milliseconds (float precision for sub-millisecond accuracy) @range [0.0, ∞) - Monotonically increasing timestamps @precision Limited by system timer resolution and float representation</p>
<p>@future_applications</p><ul>
<li>Gap-based portamento decisions (short gaps = portamento)</li>
<li>Velocity-sensitive portamento intensity</li>
<li>Timing-based performance style analysis </li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_portamento_filter_8h_source.html">PortamentoFilter.h</a></li>
<li><a class="el" href="_portamento_filter_8cpp.html">PortamentoFilter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_portamento_filter.html">PortamentoFilter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
