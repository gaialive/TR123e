<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR123e - EMCT Computing Final Project: DEV/MSPMoogLadderFilter.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TR123e - EMCT Computing Final Project<span id="projectnumber">&#160;Version 1.0</span>
   </div>
   <div id="projectbrief">Research Project Translation from gen~ to embedded Moog synth</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_m_s_p_moog_ladder_filter_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MSPMoogLadderFilter.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Moog Ladder Filter based on Antti Huovilainen's improved nonlinear model.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
</div>
<p><a href="_m_s_p_moog_ladder_filter_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:MSPMoogLadderFilter" id="r_MSPMoogLadderFilter"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_s_p_moog_ladder_filter.html">MSPMoogLadderFilter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">High-fidelity Moog ladder filter implementing Huovilainen's nonlinear model.  <a href="class_m_s_p_moog_ladder_filter.html#details">More...</a><br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Moog Ladder Filter based on Antti Huovilainen's improved nonlinear model. </p>
<p>This implementation represents a direct translation from Max/MSP Gen~ code to C++, specifically derived from the TR123 project's moogLadderFilter Gen~ patch. It implements Antti Huovilainen's enhanced model that addresses limitations in earlier digital implementations through improved nonlinear modeling and thermal noise simulation.</p>
<p>@historical_context_and_research_lineage This filter represents a significant advancement in digital analog modeling research:</p>
<p><b>Original Research (2004)</b>: Antti Huovilainen's seminal paper "Non-linear digital 
implementation of the moog ladder filter" identified key limitations in existing digital models:</p><ul>
<li>Insufficient nonlinear behavior modeling</li>
<li>Missing thermal noise characteristics</li>
<li>Frequency response inaccuracies at high resonance</li>
<li>Lack of proper saturation modeling</li>
</ul>
<p><b>Max/MSP Implementation</b>: The original Gen~ code provided a real-time implementation suitable for musical performance and production applications.</p>
<p><b>C++ Translation</b>: This implementation maintains the exact algorithm while providing optimized C++ code structure for integration into native audio applications.</p>
<p>@huovilainen_model_innovations Huovilainen's model introduced several critical improvements over earlier approaches:</p>
<ol type="1">
<li><b>Dual-Iteration Processing</b>: Two-pass algorithm for improved numerical accuracy</li>
<li><b>Nonlinear Saturation Modeling</b>: Multiple saturation stages with different characteristics</li>
<li><b>Thermal Noise Injection</b>: Simulates Johnson noise in analog circuits</li>
<li><b>Frequency-Dependent Resonance</b>: Models the frequency-dependent Q behavior</li>
<li><b>Multiple Filter Modes</b>: Six different response types from single topology</li>
<li><b>Improved Frequency Warping</b>: Enhanced compensation for digital sampling effects</li>
</ol>
<p>@mathematical_foundation The implementation is based on the discrete-time state-space model:</p>
<p>x[n+1] = A·x[n] + B·u[n] + f(x[n], u[n]) y[n] = C·x[n] + D·u[n]</p>
<p>Where:</p><ul>
<li>x[n] = [stage1State, stage2State, stage3State, stage4State]ᵀ</li>
<li>u[n] = inputSignal (with thermal noise)</li>
<li>f(x[n], u[n]) = nonlinear correction terms</li>
<li>A, B, C, D = matrices dependent on cutoff frequency and resonance</li>
</ul>
<p>@nonlinear_modeling_theory The nonlinear behavior is modeled through multiple mechanisms:</p>
<p><b>Saturation Function</b>: s(x) = x·(1 - ⅓x²) for |x| ≤ 1 <b>Feedback Saturation</b>: tanh-like behavior in resonance feedback path <b>Thermal Noise</b>: Gaussian noise injection at ~1×10⁻¹¹ amplitude <b>Frequency-Dependent Nonlinearity</b>: Saturation characteristics vary with frequency</p>
<p>@gen_to_cpp_translation_methodology The translation from Max/MSP Gen~ to C++ involved several considerations:</p>
<p><b>Data Type Conversion</b>: Gen~ uses 64-bit floating-point; maintained in C++ <b>State Management</b>: Gen~ automatic state persistence mapped to class members <b>Parameter Mapping</b>: Gen~ inlet/outlet structure converted to function parameters <b>Optimization Preservation</b>: Maintained Gen~'s computational efficiency optimizations <b>Real-time Safety</b>: Preserved Gen~'s real-time processing guarantees</p>
<p>@performance_characteristics</p><ul>
<li>Computational complexity: O(1) per sample (fixed operations regardless of parameters)</li>
<li>Memory footprint: 120 bytes (15 double-precision state variables)</li>
<li>Processing overhead: ~80-100 floating-point operations per sample</li>
<li>Numerical stability: Denormal protection and bounded nonlinear functions</li>
<li>Dynamic range: &gt;140dB with proper gain staging</li>
</ul>
<p>@filter_modes_specifications Six distinct filter responses derived from ladder topology:</p>
<ol type="1">
<li><b>LP24</b>: 24dB/octave lowpass (classic Moog response)</li>
<li><b>HP24</b>: 24dB/octave highpass (input - lowpass)</li>
<li><b>BP24</b>: 24dB/octave bandpass (complex stage combinations)</li>
<li><b>LP18</b>: 18dB/octave lowpass (3-pole response)</li>
<li><b>BP18</b>: 18dB/octave bandpass (modified stage combinations)</li>
<li><b>HP6</b>: 6dB/octave highpass (single-pole derivative)</li>
</ol>
<dl class="section author"><dt>Author</dt><dd>Antti Huovilainen (original algorithm), Timothy Paul Read Max/MSP Gen~ implementation and C++ translation </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Original research: 2004, Gen~ implementation: ~2010s, C++ translation: 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 (Direct Gen~ translation)</dd></dl>
<p>@references</p><ul>
<li>Huovilainen, A. (2004). "Non-linear digital implementation of the moog ladder filter"</li>
<li>Cycling '74 Gen~ Documentation and Best Practices</li>
<li>TR123 Project Documentation and Source Code</li>
<li>"DAFX: Digital Audio Effects" by Udo Zölzer (Chapter on Nonlinear Processing)</li>
<li>"The Art of VA Filter Design" by Vadim Zavalishin (Native Instruments)</li>
</ul>
<p>@dissertation_significance This implementation serves multiple research purposes:</p><ul>
<li>Demonstrates translation methodology from visual to textual programming</li>
<li>Provides performance comparison baseline against other filter implementations</li>
<li>Validates accuracy of algorithm translation through audio testing</li>
<li>Illustrates preservation of nonlinear characteristics across implementation domains </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_5845c8f75261e7e28026d56abc42daa5.html">DEV</a></li><li class="navelem"><a href="_m_s_p_moog_ladder_filter_8h.html">MSPMoogLadderFilter.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
