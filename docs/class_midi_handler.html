<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR123e - EMCT Computing Final Project: MidiHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TR123e - EMCT Computing Final Project<span id="projectnumber">&#160;Version 1.0</span>
   </div>
   <div id="projectbrief">Research Project Translation from gen~ to embedded Moog synth</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_midi_handler.html','','class_midi_handler-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">MidiHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Real-time MIDI message processor with temporal delay compensation.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_midi_handler_8h_source.html">MidiHandler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4b793ac30f2afbdeb05f3cb228a9d6c9" id="r_a4b793ac30f2afbdeb05f3cb228a9d6c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b793ac30f2afbdeb05f3cb228a9d6c9">MidiHandler</a> (float <a class="el" href="#a2713d270d7ca8d633cd0bd12d3d13f3f">sampleRate</a>, float delayMs=1.0f)</td></tr>
<tr class="memdesc:a4b793ac30f2afbdeb05f3cb228a9d6c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct <a class="el" href="class_midi_handler.html" title="Real-time MIDI message processor with temporal delay compensation.">MidiHandler</a> with timing parameters.  <br /></td></tr>
<tr class="memitem:a409f1653e96cf9cbdccdacdc292442be" id="r_a409f1653e96cf9cbdccdacdc292442be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a409f1653e96cf9cbdccdacdc292442be">processMidiMessage</a> (int noteNumber, int velocity, float currentTimeMs)</td></tr>
<tr class="memdesc:a409f1653e96cf9cbdccdacdc292442be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process incoming MIDI note message with timestamping.  <br /></td></tr>
<tr class="memitem:a0d6498bea1ae48944a6ed49124295475" id="r_a0d6498bea1ae48944a6ed49124295475"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d6498bea1ae48944a6ed49124295475">update</a> (float currentTimeMs)</td></tr>
<tr class="memdesc:a0d6498bea1ae48944a6ed49124295475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update temporal processing and transfer delayed messages.  <br /></td></tr>
<tr class="memitem:a281e60f13294a84c9ba7d40a9f402d9d" id="r_a281e60f13294a84c9ba7d40a9f402d9d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a281e60f13294a84c9ba7d40a9f402d9d">hasDelayedMessage</a> ()</td></tr>
<tr class="memdesc:a281e60f13294a84c9ba7d40a9f402d9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check availability of processed MIDI messages.  <br /></td></tr>
<tr class="memitem:a2615e5f77ed1bbddde0667cb7026d57b" id="r_a2615e5f77ed1bbddde0667cb7026d57b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2615e5f77ed1bbddde0667cb7026d57b">popDelayedMessage</a> ()</td></tr>
<tr class="memdesc:a2615e5f77ed1bbddde0667cb7026d57b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve and remove next processed MIDI message.  <br /></td></tr>
<tr class="memitem:afe9bdf6311de951994f72a5b4bf0f69c" id="r_afe9bdf6311de951994f72a5b4bf0f69c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe9bdf6311de951994f72a5b4bf0f69c">msToSamples</a> (float milliseconds) const</td></tr>
<tr class="memdesc:afe9bdf6311de951994f72a5b4bf0f69c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert milliseconds to sample count at current sample rate.  <br /></td></tr>
<tr class="memitem:a0bb19c7eab7914343abfc7877bfb7dfb" id="r_a0bb19c7eab7914343abfc7877bfb7dfb"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0bb19c7eab7914343abfc7877bfb7dfb">samplesToMs</a> (int samples) const</td></tr>
<tr class="memdesc:a0bb19c7eab7914343abfc7877bfb7dfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert sample count to milliseconds at current sample rate.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2713d270d7ca8d633cd0bd12d3d13f3f" id="r_a2713d270d7ca8d633cd0bd12d3d13f3f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2713d270d7ca8d633cd0bd12d3d13f3f">sampleRate</a></td></tr>
<tr class="memdesc:a2713d270d7ca8d633cd0bd12d3d13f3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio system sample rate in Hz.  <br /></td></tr>
<tr class="memitem:a4f8f45d6cf2c2e328b3dd2d28fa98506" id="r_a4f8f45d6cf2c2e328b3dd2d28fa98506"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f8f45d6cf2c2e328b3dd2d28fa98506">delayTimeMs</a></td></tr>
<tr class="memdesc:a4f8f45d6cf2c2e328b3dd2d28fa98506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay compensation period in milliseconds.  <br /></td></tr>
<tr class="memitem:a0bdf7efb12d40b49b8b394df9d01ddeb" id="r_a0bdf7efb12d40b49b8b394df9d01ddeb"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0bdf7efb12d40b49b8b394df9d01ddeb">incomingMessages</a></td></tr>
<tr class="memdesc:a0bdf7efb12d40b49b8b394df9d01ddeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue for incoming MIDI messages awaiting delay processing.  <br /></td></tr>
<tr class="memitem:aaaff909aa68908eb6b7e21e01dd671a5" id="r_aaaff909aa68908eb6b7e21e01dd671a5"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaaff909aa68908eb6b7e21e01dd671a5">delayedMessages</a></td></tr>
<tr class="memdesc:aaaff909aa68908eb6b7e21e01dd671a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue for processed messages ready for audio consumption.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Real-time MIDI message processor with temporal delay compensation. </p>
<p>The <a class="el" href="class_midi_handler.html" title="Real-time MIDI message processor with temporal delay compensation.">MidiHandler</a> class implements sophisticated MIDI event processing designed for professional audio applications requiring sample-accurate timing. It addresses inherent MIDI protocol limitations and hardware interface jitter through temporal buffering and delay compensation algorithms.</p>
<p>@design_patterns</p><ul>
<li>Producer-Consumer: Separates MIDI input from audio processing</li>
<li>Temporal Buffer: Implements time-based event scheduling</li>
<li>Queue-based Architecture: Lockless FIFO for real-time safety</li>
</ul>
<p>@real_time_considerations</p><ul>
<li>No dynamic allocation in processing path</li>
<li>Bounded execution time for all operations</li>
<li>Lock-free queue operations prevent priority inversion</li>
<li>Deterministic memory access patterns for cache efficiency</li>
</ul>
<p>@usage_example </p><div class="fragment"><div class="line"><a class="code hl_function" href="#a4b793ac30f2afbdeb05f3cb228a9d6c9">MidiHandler</a> handler(44100.0f, 2.0f);  <span class="comment">// 2ms delay compensation</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// In MIDI callback:</span></div>
<div class="line">handler.processMidiMessage(60, 100, currentTime);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// In audio callback:</span></div>
<div class="line">handler.update(currentTime);</div>
<div class="line"><span class="keywordflow">while</span> (handler.hasDelayedMessage()) {</div>
<div class="line">    <a class="code hl_struct" href="struct_midi_note_message.html">MidiNoteMessage</a> msg = handler.popDelayedMessage();</div>
<div class="line">    <span class="comment">// Process note event...</span></div>
<div class="line">}</div>
<div class="ttc" id="aclass_midi_handler_html_a4b793ac30f2afbdeb05f3cb228a9d6c9"><div class="ttname"><a href="#a4b793ac30f2afbdeb05f3cb228a9d6c9">MidiHandler::MidiHandler</a></div><div class="ttdeci">MidiHandler(float sampleRate, float delayMs=1.0f)</div><div class="ttdoc">Construct MidiHandler with timing parameters.</div><div class="ttdef"><b>Definition</b> MidiHandler.cpp:29</div></div>
<div class="ttc" id="astruct_midi_note_message_html"><div class="ttname"><a href="struct_midi_note_message.html">MidiNoteMessage</a></div><div class="ttdoc">Encapsulates MIDI note event data with high-precision timing.</div><div class="ttdef"><b>Definition</b> MidiHandler.h:72</div></div>
</div><!-- fragment --> </div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4b793ac30f2afbdeb05f3cb228a9d6c9" name="a4b793ac30f2afbdeb05f3cb228a9d6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b793ac30f2afbdeb05f3cb228a9d6c9">&#9670;&#160;</a></span>MidiHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MidiHandler::MidiHandler </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>sampleRate</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>delayMs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1.0f</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct <a class="el" href="class_midi_handler.html" title="Real-time MIDI message processor with temporal delay compensation.">MidiHandler</a> with timing parameters. </p>
<p>Initialize <a class="el" href="class_midi_handler.html" title="Real-time MIDI message processor with temporal delay compensation.">MidiHandler</a> with audio system parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sampleRate</td><td>Audio system sample rate in Hz Used for time/sample conversion calculations Typical values: 44100, 48000, 96000 Hz</td></tr>
    <tr><td class="paramname">delayMs</td><td>Temporal delay compensation in milliseconds Allows jitter analysis and timing stabilization Default: 1.0ms (suitable for most hardware) Range: [0.1-10.0]ms typical</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) - Constant time initialization @memory Minimal fixed overhead plus queue storage</p>
<p>@design_rationale Default 1ms delay provides balance between timing accuracy and responsiveness. Longer delays improve jitter compensation but increase perceived latency. Shorter delays reduce latency but may not fully compensate for hardware timing variations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sampleRate</td><td>Audio processing sample rate </td></tr>
    <tr><td class="paramname">delayMs</td><td>Temporal delay compensation period</td></tr>
  </table>
  </dd>
</dl>
<p>@implementation_details Uses member initializer list for optimal construction performance. No dynamic allocation or complex initialization required. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a281e60f13294a84c9ba7d40a9f402d9d" name="a281e60f13294a84c9ba7d40a9f402d9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281e60f13294a84c9ba7d40a9f402d9d">&#9670;&#160;</a></span>hasDelayedMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MidiHandler::hasDelayedMessage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check availability of processed MIDI messages. </p>
<p>Check for available processed messages.</p>
<dl class="section return"><dt>Returns</dt><dd>true if delayed messages are available for processing false if no messages ready</dd></dl>
<p>@complexity O(1) - Constant time queue size check @thread_safety Safe for concurrent read access @realtime_safety Real-time safe (no blocking operations)</p>
<p>@usage_pattern Typically used in conditional loop for message processing: </p><div class="fragment"><div class="line"><span class="keywordflow">while</span> (handler.hasDelayedMessage()) {</div>
<div class="line">    <a class="code hl_struct" href="struct_midi_note_message.html">MidiNoteMessage</a> msg = handler.popDelayedMessage();</div>
<div class="line">    <span class="comment">// Process message...</span></div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>Availability status of delayed messages</dd></dl>
<p>@implementation_notes Simple wrapper around std::queue::empty() for consistent API. Provides boolean logic inversion for intuitive usage patterns. </p>

</div>
</div>
<a id="afe9bdf6311de951994f72a5b4bf0f69c" name="afe9bdf6311de951994f72a5b4bf0f69c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe9bdf6311de951994f72a5b4bf0f69c">&#9670;&#160;</a></span>msToSamples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MidiHandler::msToSamples </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>milliseconds</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert milliseconds to sample count at current sample rate. </p>
<p>Convert time duration to sample count.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>Time duration in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Equivalent number of audio samples (rounded to nearest integer)</dd></dl>
<p>@complexity O(1) - Single arithmetic operation @precision Limited by floating-point arithmetic and integer rounding</p>
<p>@formula samples = (milliseconds * sampleRate) / 1000</p>
<p>@use_cases</p><ul>
<li>Converting delay times to sample-based counters</li>
<li>Calculating envelope timing in samples</li>
<li>Sample-accurate event scheduling calculations</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>Input time duration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Equivalent sample count (rounded)</dd></dl>
<p>@mathematical_precision Formula: samples = (ms * sampleRate) / 1000 Rounding to nearest integer minimizes quantization errors for typical audio timing calculations.</p>
<p>@performance_characteristics Single floating-point multiplication and division operation. Modern CPUs execute this in 1-2 clock cycles with pipelining.</p>
<p>@precision_considerations Integer rounding may introduce ±0.5 sample timing error, which corresponds to ±11.3μs at 44.1kHz sample rate - negligible for most musical applications but may be significant for scientific measurement applications. </p>

</div>
</div>
<a id="a2615e5f77ed1bbddde0667cb7026d57b" name="a2615e5f77ed1bbddde0667cb7026d57b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2615e5f77ed1bbddde0667cb7026d57b">&#9670;&#160;</a></span>popDelayedMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a> MidiHandler::popDelayedMessage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve and remove next processed MIDI message. </p>
<p>Extract next processed MIDI message.</p>
<p>Returns the oldest delayed message from the processing queue and removes it from the internal buffer. Messages are returned in temporal order (FIFO) to preserve musical timing relationships.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_midi_note_message.html" title="Encapsulates MIDI note event data with high-precision timing.">MidiNoteMessage</a> containing note data and timestamp Returns {-1, -1, -1.0f} if queue is empty</dd></dl>
<p>@complexity O(1) - Constant time queue extraction @thread_safety Safe for single consumer thread @realtime_safety Real-time safe (no dynamic allocation)</p>
<p>@error_handling Empty queue condition returns sentinel values (-1) that can be checked by caller for proper error handling without exceptions.</p>
<p>@memory_management Message data is copied by value; no memory management required by caller. Internal queue storage is automatically managed.</p>
<dl class="section note"><dt>Note</dt><dd>Caller should verify message validity by checking for sentinel values before processing note data</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Next available message or sentinel values if empty</dd></dl>
<p>@error_handling_strategy Returns sentinel values {-1, -1, -1.0f} for empty queue condition rather than throwing exceptions. This approach maintains real-time safety by avoiding exception handling overhead in audio threads.</p>
<p>@memory_efficiency Message data copied by value eliminates pointer management and potential memory leaks. Queue automatically manages internal storage. </p>
<p>Handle empty queue condition gracefully Sentinel values indicate invalid message to caller</p>
<p>Extract message data before queue modification Copy-by-value ensures data integrity across queue operations</p>
<p>Remove message from queue after data extraction Maintains queue state consistency and prevents memory growth</p>

</div>
</div>
<a id="a409f1653e96cf9cbdccdacdc292442be" name="a409f1653e96cf9cbdccdacdc292442be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409f1653e96cf9cbdccdacdc292442be">&#9670;&#160;</a></span>processMidiMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MidiHandler::processMidiMessage </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>noteNumber</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>velocity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>currentTimeMs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process incoming MIDI note message with timestamping. </p>
<p>Buffer incoming MIDI message with timestamp.</p>
<p>Accepts raw MIDI note data and creates timestamped message for temporal processing. Messages are buffered in arrival order for subsequent delay analysis and compensation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">noteNumber</td><td>MIDI note number [0-127] </td></tr>
    <tr><td class="paramname">velocity</td><td>MIDI velocity [0-127] 0 = note-off, 1-127 = note-on with velocity </td></tr>
    <tr><td class="paramname">currentTimeMs</td><td>Current system time in milliseconds Must be monotonically increasing for proper operation</td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(1) amortized - Queue insertion @memory O(n) where n = number of buffered messages @realtime_safety Real-time safe (no dynamic allocation)</p>
<p>@thread_safety Safe for single-threaded MIDI input processing </p><dl class="section note"><dt>Note</dt><dd>This method should be called from MIDI input thread/callback</dd></dl>
<p>@implementation_details</p><ul>
<li>Creates <a class="el" href="struct_midi_note_message.html" title="Encapsulates MIDI note event data with high-precision timing.">MidiNoteMessage</a> structure with current timestamp</li>
<li>Pushes to incoming message queue for temporal analysis</li>
<li>Queue automatically manages memory with bounded growth</li>
<li>No validation performed for maximum real-time performance</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">noteNumber</td><td>MIDI note number </td></tr>
    <tr><td class="paramname">velocity</td><td>MIDI velocity value <br  />
 </td></tr>
    <tr><td class="paramname">currentTimeMs</td><td>Current system timestamp</td></tr>
  </table>
  </dd>
</dl>
<p>@performance_analysis</p><ul>
<li>Queue insertion: O(1) amortized complexity</li>
<li>Memory allocation: Bounded by queue implementation</li>
<li>Cache behavior: Sequential access pattern optimal for modern CPUs</li>
</ul>
<p>@debug_instrumentation Commented rt_printf() statement available for real-time debugging. When enabled, provides detailed message logging with timing information. Use sparingly in production due to potential timing impact. </p>
<p>Construct message structure with input parameters Uses direct initialization for optimal performance</p>
<p>Debug logging (disabled for production performance) Uncomment for development/debugging scenarios: rt_printf("MIDI: Note %d, Velocity %d at %.2f ms\n", msg.noteNumber, msg.velocity, msg.timestamp);</p>
<p>Queue message for temporal processing Queue automatically handles memory management and growth</p>

</div>
</div>
<a id="a0bb19c7eab7914343abfc7877bfb7dfb" name="a0bb19c7eab7914343abfc7877bfb7dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb19c7eab7914343abfc7877bfb7dfb">&#9670;&#160;</a></span>samplesToMs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MidiHandler::samplesToMs </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>samples</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert sample count to milliseconds at current sample rate. </p>
<p>Convert sample count to time duration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>Number of audio samples </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Equivalent time duration in milliseconds</dd></dl>
<p>@complexity O(1) - Single arithmetic operation @precision Full floating-point precision maintained</p>
<p>@formula milliseconds = (samples * 1000) / sampleRate</p>
<p>@use_cases</p><ul>
<li>Converting buffer sizes to timing information</li>
<li>Latency calculations and reporting</li>
<li>Temporal analysis of processing delays</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>Input sample count </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Equivalent time duration in milliseconds</dd></dl>
<p>@mathematical_precision Formula: ms = (samples * 1000) / sampleRate Maintains full floating-point precision for accurate timing calculations. No rounding applied to preserve maximum temporal resolution.</p>
<p>@performance_characteristics Single floating-point multiplication and division operation. Identical computational cost to <a class="el" href="#afe9bdf6311de951994f72a5b4bf0f69c" title="Convert milliseconds to sample count at current sample rate.">msToSamples()</a> but with float return type.</p>
<p>@accuracy_analysis Precision limited only by IEEE 754 floating-point representation:</p><ul>
<li>23-bit mantissa provides ~7 decimal digits of precision</li>
<li>At 44.1kHz: theoretical resolution ~0.00001ms (10ns)</li>
<li>Practical resolution limited by system clock accuracy</li>
</ul>
<p>@use_case_examples</p><ul>
<li>Buffer latency calculations: samplesToMs(bufferSize)</li>
<li>Processing delay measurement: samplesToMs(processingCycles)</li>
<li>Timing analysis: samplesToMs(eventSeparation) </li>
</ul>

</div>
</div>
<a id="a0d6498bea1ae48944a6ed49124295475" name="a0d6498bea1ae48944a6ed49124295475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6498bea1ae48944a6ed49124295475">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MidiHandler::update </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>currentTimeMs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update temporal processing and transfer delayed messages. </p>
<p>Process temporal delays and transfer ready messages.</p>
<p>Analyzes incoming message timestamps against current time to determine which messages have completed their delay period. Qualified messages are transferred to the delayed queue for audio processing consumption.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTimeMs</td><td>Current system time in milliseconds Must match timeline used in <a class="el" href="#a409f1653e96cf9cbdccdacdc292442be" title="Process incoming MIDI note message with timestamping.">processMidiMessage()</a></td></tr>
  </table>
  </dd>
</dl>
<p>@complexity O(k) where k = number of messages ready for processing @realtime_safety Real-time safe (bounded execution time) @determinism Execution time bounded by queue size and delay period</p>
<p>@algorithm_details</p><ol type="1">
<li>Iterate through incoming message queue (FIFO order)</li>
<li>Check if (currentTime - messageTime) &gt;= delayPeriod</li>
<li>Transfer qualified messages to delayed queue</li>
<li>Stop at first non-qualified message (temporal ordering preserved)</li>
</ol>
<p>@temporal_accuracy Timing accuracy depends on <a class="el" href="#a0d6498bea1ae48944a6ed49124295475" title="Update temporal processing and transfer delayed messages.">update()</a> call frequency. For sample-accurate processing, call once per audio buffer with buffer-aligned timing.</p>
<dl class="section note"><dt>Note</dt><dd>This method should be called from audio processing thread at the beginning of each audio buffer processing cycle</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTimeMs</td><td>Current system time reference</td></tr>
  </table>
  </dd>
</dl>
<p>@algorithm_efficiency The algorithm leverages temporal ordering of incoming messages to minimize processing overhead. Since messages arrive in chronological order, processing can stop at the first non-ready message, avoiding unnecessary queue traversal.</p>
<p>@temporal_accuracy Delay calculation: (currentTime - messageTime) &gt;= delayPeriod Provides sub-millisecond timing accuracy limited only by system clock resolution and <a class="el" href="#a0d6498bea1ae48944a6ed49124295475" title="Update temporal processing and transfer delayed messages.">update()</a> call frequency. </p>
<p>Process all messages that have completed delay period FIFO ordering ensures temporal relationships are preserved</p>
<p>Examine oldest message without removing from queue Reference avoids unnecessary copying for performance</p>
<p>Check if message has completed its delay period Temporal comparison determines readiness for audio processing</p>
<p>Transfer message to delayed queue for consumption Message is ready for immediate audio processing</p>
<p>Remove processed message from incoming queue Maintains queue state consistency</p>
<p>Stop processing at first non-ready message Temporal ordering guarantees all subsequent messages are also not ready, enabling early termination</p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="aaaff909aa68908eb6b7e21e01dd671a5" name="aaaff909aa68908eb6b7e21e01dd671a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaff909aa68908eb6b7e21e01dd671a5">&#9670;&#160;</a></span>delayedMessages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a>&gt; MidiHandler::delayedMessages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue for processed messages ready for audio consumption. </p>
<p>Contains MIDI messages that have completed their delay period and are ready for immediate processing by the audio synthesis engine. Messages are consumed by audio thread in temporal order.</p>
<p>@container std::queue&lt;MidiNoteMessage&gt; @ordering First-In-First-Out (maintains musical timing) @consumption Audio processing thread via <a class="el" href="#a2615e5f77ed1bbddde0667cb7026d57b" title="Retrieve and remove next processed MIDI message.">popDelayedMessage()</a> @thread_safety Not thread-safe (single consumer assumed) </p>

</div>
</div>
<a id="a4f8f45d6cf2c2e328b3dd2d28fa98506" name="a4f8f45d6cf2c2e328b3dd2d28fa98506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f8f45d6cf2c2e328b3dd2d28fa98506">&#9670;&#160;</a></span>delayTimeMs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float MidiHandler::delayTimeMs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delay compensation period in milliseconds. </p>
<p>Configurable delay period for temporal jitter compensation and timing stabilization. Longer delays improve timing accuracy but increase system latency. Shorter delays reduce latency but may not adequately compensate for hardware timing variations.</p>
<p>@units Milliseconds @range [0.1-10.0]ms typical for audio applications @default 1.0ms (good balance of accuracy and responsiveness) </p>

</div>
</div>
<a id="a0bdf7efb12d40b49b8b394df9d01ddeb" name="a0bdf7efb12d40b49b8b394df9d01ddeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bdf7efb12d40b49b8b394df9d01ddeb">&#9670;&#160;</a></span>incomingMessages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="struct_midi_note_message.html">MidiNoteMessage</a>&gt; MidiHandler::incomingMessages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue for incoming MIDI messages awaiting delay processing. </p>
<p>FIFO queue storing raw MIDI messages with timestamps for temporal analysis. Messages remain in this queue until their delay period expires, at which point they're transferred to delayedMessages queue.</p>
<p>@container std::queue&lt;MidiNoteMessage&gt; @ordering First-In-First-Out (preserves temporal relationships) @growth_behavior Dynamic allocation with exponential growth @thread_safety Not thread-safe (requires external synchronization) </p>

</div>
</div>
<a id="a2713d270d7ca8d633cd0bd12d3d13f3f" name="a2713d270d7ca8d633cd0bd12d3d13f3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2713d270d7ca8d633cd0bd12d3d13f3f">&#9670;&#160;</a></span>sampleRate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float MidiHandler::sampleRate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Audio system sample rate in Hz. </p>
<p>Cached sample rate for time/sample conversion calculations. Eliminates repeated parameter passing and improves computational efficiency.</p>
<p>@units Hertz (samples per second) @range Typically [8000-192000] Hz for audio applications @precision Full floating-point precision for accurate conversions </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_midi_handler_8h_source.html">MidiHandler.h</a></li>
<li><a class="el" href="_midi_handler_8cpp.html">MidiHandler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_midi_handler.html">MidiHandler</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
